<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Stvori sobu</title>
    <link rel="stylesheet" href="/admin/rooms_create.css">
</head>
<body>
    <div class="form-container">
        <h1>Stvori sobu</h1>

        <form action="/admin/rooms" method="POST">
            <div>
                <label for="name">Naziv sobe:</label>
                <input type="text" id="name" name="name" required>
            </div>

            <div>
                <label for="type">Tip sobe:</label>
                <select id="type" name="type" required>
                    <option value="superfast">Superfast</option>
                    <option value="fast">Fast</option>
                    <option value="slow">Slow</option>
                </select>
            </div>

            <div>
                <label for="categories">Kategorije:</label>
                <div id="categories">
                    <% categories.forEach(category => { %>
                        <button type="button" class="category-button" data-category="<%= category %>"><%= category %></button>
                    <% }); %>
                </div>
                <input type="hidden" name="categories" id="selectedCategories" required>
            </div>

            <button type="submit" id="createRoomButton" disabled>Stvori sobu</button>
        </form>
    </div>

    <script>
        const categoryButtons = document.querySelectorAll('.category-button');
        const selectedCategoriesInput = document.getElementById('selectedCategories');
        const createRoomButton = document.getElementById('createRoomButton');
        let selectedCategories = [];

        function checkIfCategoriesSelected() {
            createRoomButton.disabled = selectedCategories.length === 0;
        }

        categoryButtons.forEach(button => {
            button.addEventListener('click', () => {
                const category = button.getAttribute('data-category');

                if (selectedCategories.includes(category)) {
                    selectedCategories = selectedCategories.filter(cat => cat !== category);
                    button.classList.remove('selected');
                } else {
                    selectedCategories.push(category);
                    button.classList.add('selected');
                }

                selectedCategoriesInput.value = JSON.stringify(selectedCategories);
                checkIfCategoriesSelected();
            });
        });

        checkIfCategoriesSelected();
    </script>
</body>
</html>
