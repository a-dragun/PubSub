<!DOCTYPE html>
<html lang="en">
<head>
    <title>Popis soba</title>
    <link rel="stylesheet" href="/css/rooms/rooms.css">
</head>
<body>
    <%- include('../partials/header') %>
    <%- include('../partials/messaging') %>
    <%- include('../partials/happyHour') %>
    <h1>Popis soba</h1>

    <div class="grid-container">
        <% rooms.forEach(room => { %>
            <a href="/rooms/<%= room._id %>" class="room-box">
                <h2><%= room.name %>
                    <% if (room.password) { %>
                    <span class="lock-icon" title="Privatna soba">ðŸ”’</span>
                    <% } else { %>
                    <span class="lock-icon" title="Javna soba">ðŸ”“</span>
                    <% } %>
                </h2>
                <ul>
                    <li><strong>Online:</strong>
                      <span class="online-count">
                        <%= room.onlineCount %>
                      </span>
                    </li>
                    <li><strong>Tip sobe:</strong> <%= room.type %></li>
                    <li><strong>Kategorije:</strong>
                        <% room.categories.forEach(cat => { %>
                            <span class="category"><%= cat %></span>
                        <% }); %>
                    </li>
                </ul>
            </a>
        <% }); %>
    </div>
        <section id="global-leaderboard">
  <h2>Globalni Leaderboard</h2>
  <table class="leaderboard-table">
    <thead>
      <tr>
        <th>#</th>
        <th>Username</th>
        <th>Bodovi</th>
        <th>Zadnji put logiran</th>
      </tr>
    </thead>
    <tbody>
      <% leaderboardUsers.forEach((u, index) => { %>
        <tr>
          <td><%= index + 1 %></td>
          <td><a href="/user/<%= u._id %>"><%= u.name %></a></td>
          <td><%= u.totalScore %></td>
          <td><%= u.lastLoginAt ? new Date(u.lastLoginAt).toLocaleDateString() : 'Nepoznato' %></td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</section>
</body>
</html>